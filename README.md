# ğŸ† FanForce AI - Win-Win Prediction Platform | AIé©±åŠ¨çš„åŒèµ¢é¢„æµ‹å¹³å°

<p align="center">
  <img src="https://img.shields.io/badge/Next.js-14.0-blue" alt="Next.js">
  <img src="https://img.shields.io/badge/TypeScript-5.0-blue" alt="TypeScript">
  <img src="https://img.shields.io/badge/Tailwind-3.3-cyan" alt="Tailwind">
  <img src="https://img.shields.io/badge/Chiliz-SDK-green" alt="Chiliz SDK">
  <img src="https://img.shields.io/badge/Non--Zero--Sum-Win--Win-gold" alt="Non-Zero-Sum">
</p>

## ğŸ¯ æ ¸å¿ƒç†å¿µ / Core Philosophy

### AI-Powered Non-Zero-Sum Betting - Everyone Profits from Predictions
### AIé©±åŠ¨çš„éé›¶å’ŒæŠ•æ³¨ - è®©é¢„æµ‹å˜æˆäººäººè·åˆ©

**é©å‘½æ€§éé›¶å’Œè®¾è®¡** ç¡®ä¿æ‰€æœ‰å‚ä¸è€…éƒ½èƒ½ä»é¢„æµ‹ä¸­è·å¾—å¥–åŠ±ï¼š
- ğŸ¯ **è·èƒœè€…**: 70%å¥–åŠ±æ± åˆ†æˆ + 100%æœ¬é‡‘è¿”è¿˜
- ğŸ’¡ **å¤±è´¥è€…**: 30%å¥–åŠ±æ± åˆ†æˆ + 100%æœ¬é‡‘è¿”è¿˜  
- ğŸ’° **ç»“æœ**: æ— è®ºè¾“èµ¢ï¼Œäººäººéƒ½æœ‰æ”¶ç›Š

**Revolutionary non-zero-sum design** ensures all participants earn rewards from their predictions:
- ğŸ¯ **Winners**: 70% reward pool + 100% principal return
- ğŸ’¡ **Losers**: 30% reward pool + 100% principal return
- ğŸ’° **Result**: Everyone profits regardless of outcome

## ğŸ“– é¡¹ç›®ç®€ä»‹ / Project Overview

**FanForce AI** æ˜¯ä¸€ä¸ªçªç ´ä¼ ç»Ÿé›¶å’Œåšå¼ˆçš„ **AIé©±åŠ¨ä½“è‚²é¢„æµ‹å¹³å°**ã€‚é€šè¿‡é©å‘½æ€§çš„éé›¶å’Œè®¾è®¡ï¼Œè®©æ‰€æœ‰å‚ä¸è€…éƒ½èƒ½ä»æ™ºèƒ½é¢„æµ‹ä¸­è·åˆ©ï¼ŒçœŸæ­£å®ç°äº†"é¢„æµ‹å³æ”¶ç›Š"çš„åˆ›æ–°ç†å¿µã€‚

**FanForce AI** is a revolutionary **AI-powered sports prediction platform** that breaks traditional zero-sum gaming. Through innovative non-zero-sum design, all participants can profit from intelligent predictions, truly realizing the concept of "predict to profit".

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§ / Core Features

- **ğŸ¤– AIæˆ˜æ–—åŠ›è¯„åˆ†**: åŸºäºå†å²èƒœç‡ã€çƒå‘˜å¹´é¾„ã€ä¼¤ç—…æƒ…å†µçš„å¤šç»´è¯„ä¼°ç®—æ³•
- **ğŸ—³ï¸ Fan TokenæŠ•ç¥¨**: é›†æˆChilizç”Ÿæ€ï¼ŒæŒæœ‰Fan Tokenç”¨æˆ·å¯å‚ä¸é¢„æµ‹æŠ•ç¥¨
- **ğŸ“Š å®æ—¶æ•°æ®å¯è§†åŒ–**: åŠ¨æ€å±•ç¤ºè¯„åˆ†å¯¹æ¯”å’ŒæŠ•ç¥¨ç»“æœç»Ÿè®¡
- **ğŸ† 2022ä¸–ç•Œæ¯æ•°æ®**: ä½¿ç”¨çœŸå®çš„å…«å¼ºçƒé˜Ÿæ•°æ®ï¼Œå¢å¼ºä»£å…¥æ„Ÿ
- **ğŸŒ åŒè¯­æ”¯æŒ**: å®Œæ•´çš„ä¸­è‹±æ–‡åŒè¯­ç•Œé¢å’Œè§£è¯´

### ğŸ”§ æŠ€æœ¯æ¶æ„ / Technical Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js 14    â”‚    â”‚   AI Algorithm   â”‚    â”‚  Chiliz SDK     â”‚
â”‚   Frontend       â”‚<-->â”‚   æˆ˜æ–—åŠ›è¯„åˆ†      â”‚<-->â”‚  Fan Token      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                       â”‚
         â–¼                        â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tailwind CSS   â”‚    â”‚   Mock Data      â”‚    â”‚  WalletConnect  â”‚
â”‚  å“åº”å¼UI        â”‚    â”‚   çƒé˜Ÿæ•°æ®        â”‚    â”‚  é’±åŒ…è¿æ¥        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  i18n Module    â”‚
â”‚  å›½é™…åŒ–æ¨¡å—      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹ / Quick Start

### 1. ç¯å¢ƒè¦æ±‚ / Prerequisites

- Node.js 18.17+ 
- npm æˆ– yarn
- ç°ä»£æµè§ˆå™¨æ”¯æŒ
- **PostgreSQL 12+** (æ–°å¢ / New)
- **Web3é’±åŒ…** (MetaMaskç­‰)

### 2. æ•°æ®åº“è®¾ç½® / Database Setup

**Step 1: å®‰è£…PostgreSQL / Install PostgreSQL**
```bash
# Windows (ä½¿ç”¨Chocolatey)
choco install postgresql

# macOS (ä½¿ç”¨Homebrew)
brew install postgresql

# Ubuntu/Debian
sudo apt-get install postgresql postgresql-contrib
```

**Step 2: åˆ›å»ºæ•°æ®åº“ç”¨æˆ· / Create Database User**
```sql
-- è¿æ¥åˆ°PostgreSQL / Connect to PostgreSQL
psql -U postgres

-- åˆ›å»ºæ•°æ®åº“ç”¨æˆ· / Create database user
CREATE USER fanforce_user WITH PASSWORD 'your_password';

-- èµ‹äºˆæƒé™ / Grant permissions
ALTER USER fanforce_user CREATEDB;
```

**Step 3: é…ç½®ç¯å¢ƒå˜é‡ / Configure Environment Variables**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ / Copy environment template
cp .env.example .env.local

# ç¼–è¾‘ .env.local æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥
# Edit .env.local file to configure database connection
```

**Step 4: åˆå§‹åŒ–æ•°æ®åº“ / Initialize Database**
```bash
# è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å’Œè¡¨ç»“æ„ / Automatically create database and tables
node scripts/init-database.js
```

### 3. å®‰è£…ä¾èµ– / Installation

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/fanforce-ai.git
cd fanforce-ai

# å®‰è£…ä¾èµ– (å·²åŒ…å«PostgreSQLé©±åŠ¨)
npm install
# æˆ–è€…ä½¿ç”¨ yarn
yarn install
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ / Start Development Server

```bash
npm run dev
# æˆ–è€…
yarn dev
```

é¡¹ç›®å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 5. é¡¹ç›®æ„å»º / Build for Production

```bash
npm run build
npm start
```

### 6. æ•°æ®åº“ç®¡ç† / Database Management

**æµ‹è¯•æ•°æ®åº“è¿æ¥ / Test Database Connection**
```bash
# éªŒè¯æ•°æ®åº“è¿æ¥çŠ¶æ€ / Verify database connection status
node test-db-connection.js
```

### 7. åç«¯APIæœåŠ¡å™¨ / Backend API Server ğŸ†•

**FanForce AI now includes a comprehensive Express.js backend API system:**
**FanForce AIç°åœ¨åŒ…å«ä¸€ä¸ªå…¨é¢çš„Express.jsåç«¯APIç³»ç»Ÿï¼š**

**å¯åŠ¨APIæœåŠ¡å™¨ / Start API Server**
```bash
# ç¼–è¾‘server.jsæ–‡ä»¶ï¼Œè¾“å…¥ä½ çš„PostgreSQLå¯†ç 
# Edit server.js file with your PostgreSQL password
npm run server

# æˆ–è€…åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯ / Or start both frontend and backend
npm run dev-all
```

**APIç«¯ç‚¹æµ‹è¯• / API Endpoints Testing**
```bash
# ç¼–è¾‘test-api.jsæ–‡ä»¶ï¼Œè¾“å…¥ä½ çš„PostgreSQLå¯†ç 
# Edit test-api.js file with your PostgreSQL password
node test-api.js
```

**æ ¸å¿ƒAPIåŠŸèƒ½ / Core API Features**
- ğŸ” **JWTè®¤è¯ç³»ç»Ÿ** / JWT Authentication System
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** / User Management (profiles, roles, balances)
- ğŸ¯ **æ´»åŠ¨ç®¡ç†** / Event Management (CRUD operations)
- ğŸƒâ€â™‚ï¸ **è¿åŠ¨å‘˜ç®¡ç†** / Athlete Management (rankings, status)
- ğŸŸï¸ **åœºé¦†ç®¡ç†** / Venue Management (capacity, availability)
- ğŸ“Š **åˆ†æç³»ç»Ÿ** / Analytics System (metrics, reports)
- ğŸ”” **å®æ—¶é€šçŸ¥** / Real-time Notifications (WebSocket ready)
- ğŸ›¡ï¸ **å®‰å…¨ä¸­é—´ä»¶** / Security Middleware (CORS, rate limiting)

**APIç«¯ç‚¹åˆ—è¡¨ / API Endpoints List**
```
Public Endpoints / å…¬å…±ç«¯ç‚¹:
â”œâ”€â”€ GET  /health              # å¥åº·æ£€æŸ¥ / Health check
â”œâ”€â”€ POST /api/auth/login      # ç”¨æˆ·ç™»å½• / User login
â”œâ”€â”€ GET  /api/events          # æ´»åŠ¨åˆ—è¡¨ / Events list
â”œâ”€â”€ GET  /api/athletes        # è¿åŠ¨å‘˜åˆ—è¡¨ / Athletes list
â””â”€â”€ GET  /api/venues          # åœºé¦†åˆ—è¡¨ / Venues list

Protected Endpoints / å—ä¿æŠ¤ç«¯ç‚¹:
â””â”€â”€ GET  /api/users/profile   # ç”¨æˆ·æ¡£æ¡ˆ / User profile
```

**æŠ€æœ¯æ ˆ / Technology Stack**
- **Backend**: Node.js 22.9.0 + Express.js
- **Database**: PostgreSQL 17.5 with connection pooling
- **Authentication**: JWT + Wallet signature verification
- **Security**: Helmet, CORS, Rate limiting (100 req/15min)
- **Logging**: Winston (console + file)
- **WebSocket**: Socket.io for real-time communication

## ğŸ”— WebSocket Real-time Engine / WebSocketå®æ—¶å¼•æ“ ğŸ†•

**FanForce AI now features a comprehensive WebSocket real-time system for live campus sports engagement:**
**FanForce AIç°åœ¨å…·å¤‡å…¨é¢çš„WebSocketå®æ—¶ç³»ç»Ÿï¼Œç”¨äºå®æ—¶æ ¡å›­ä½“è‚²å‚ä¸ï¼š**

### è¿æ¥ & è®¤è¯ / Connection & Authentication
- **WebSocketç«¯ç‚¹**: `ws://localhost:3001` (å¼€å‘ç¯å¢ƒ)
- **è®¤è¯æ–¹å¼**: JWT token required in handshake (`auth.token`)
- **è‡ªåŠ¨é‡è¿**: 5ç§’é—´éš”çš„å†…ç½®é‡è¿æœºåˆ¶

### ç”¨æˆ·è§’è‰² & æƒé™ / User Roles & Permissions
- **ğŸ”§ Admin**: å…¨æƒè®¿é—®æ‰€æœ‰äº‹ä»¶ï¼Œæ›´æ–°æ¯”èµ›ç»“æœï¼Œåˆ†å‘å¥–åŠ±
- **ğŸ§‘â€ğŸ’¼ Ambassador**: åˆ›å»ºäº‹ä»¶ï¼Œæ›´æ–°æ¯”èµ›ç»“æœï¼Œæ¥æ”¶QRæ‰«æé€šçŸ¥
- **ğŸƒâ€â™‚ï¸ Athlete**: å‚ä¸äº‹ä»¶ï¼Œæ¥æ”¶çŠ¶æ€æ›´æ–°
- **ğŸ™‹â€â™‚ï¸ Audience**: åŠ å…¥äº‹ä»¶ï¼Œæ‰«æQRç ï¼Œæ¥æ”¶é€šçŸ¥

### å®æ—¶äº‹ä»¶ / Real-time Events

#### è¿æ¥äº‹ä»¶ / Connection Events
- `connected` - æ¬¢è¿æ¶ˆæ¯å’Œç”¨æˆ·ä¿¡æ¯
- `error` - é”™è¯¯é€šçŸ¥
- `disconnect` - æ–­å¼€è¿æ¥é€šçŸ¥

#### ç”¨æˆ·çŠ¶æ€æ›´æ–° / User Status Updates
- `update_status` - æ›´æ–°ç”¨æˆ·çŠ¶æ€ (online/active)
- `user_status_update` - å¹¿æ’­ç”¨æˆ·çŠ¶æ€å˜åŒ–

#### äº‹ä»¶å‚ä¸ / Event Participation
- `join_event` - åŠ å…¥äº‹ä»¶æˆ¿é—´
- `event_joined` - äº‹ä»¶åŠ å…¥ç¡®è®¤
- `participant_joined` - æ–°å‚ä¸è€…é€šçŸ¥
- `participant_disconnected` - å‚ä¸è€…ç¦»å¼€é€šçŸ¥

#### æ¯”èµ›ç»“æœ / Match Results
- `match_result` - æäº¤æ¯”èµ›ç»“æœ (ä»…admin/ambassador)
- `match_result_update` - å‘å‚ä¸è€…å¹¿æ’­æ¯”èµ›ç»“æœ
- `match_completed` - é€šç”¨æ¯”èµ›å®Œæˆé€šçŸ¥

#### äºŒç»´ç ç³»ç»Ÿ / QR Code System
- `qr_scan` - æŠ¥å‘ŠQRç æ‰«æ (ä»…audience)
- `qr_scan_update` - å‘admin/ambassadorå‘é€QRæ‰«æé€šçŸ¥

#### å¥–åŠ±åˆ†é… / Reward Distribution
- `reward_distribution` - åˆ†é…å¥–åŠ± (ä»…admin)
- `reward_received` - ä¸ªäººå¥–åŠ±é€šçŸ¥

#### å¥åº·ç›‘æ§ / Health Monitoring
- `ping` - å‘é€pingæ£€æŸ¥è¿æ¥å¥åº·
- `pong` - æ¥æ”¶pongå“åº”å’Œæ—¶é—´æˆ³

### æˆ¿é—´ç»“æ„ / Room Structure
- `user_{userId}` - ä¸ªäººç”¨æˆ·æˆ¿é—´
- `role_{role}` - åŸºäºè§’è‰²çš„æˆ¿é—´ (admin, ambassador, athlete, audience)
- `event_{eventId}` - äº‹ä»¶ç‰¹å®šæˆ¿é—´
- `general_notifications` - å…¨å±€é€šçŸ¥

### ä½¿ç”¨ç¤ºä¾‹ / Usage Example

```javascript
// è¿æ¥WebSocket / Connect to WebSocket
const socket = io('ws://localhost:3001', {
  auth: { token: jwtToken }
});

// ç›‘å¬è¿æ¥ / Listen for connection
socket.on('connected', (data) => {
  console.log('Connected:', data.message);
});

// åŠ å…¥äº‹ä»¶ / Join an event
socket.emit('join_event', { eventId: 'event_123' });

// æäº¤æ¯”èµ›ç»“æœ (admin/ambassador) / Submit match result
socket.emit('match_result', {
  eventId: 'event_123',
  teamAScore: 3,
  teamBScore: 1,
  winningTeam: 'A'
});

// æ‰«æQRç  (audience) / Scan QR code
socket.emit('qr_scan', {
  eventId: 'event_123',
  scanResult: 'jwt_token_from_qr'
});
```

### WebSocketæµ‹è¯• / WebSocket Testing

```bash
# å¯åŠ¨WebSocketæœåŠ¡å™¨ / Start WebSocket server
npm run server

# è¿è¡ŒWebSocketæµ‹è¯• / Run WebSocket tests
npm run test-websocket

# æ¼”ç¤ºé¡µé¢ / Demo page
# è®¿é—® http://localhost:3000/websocket-demo
```

### å®æ—¶åŠŸèƒ½ç‰¹æ€§ / Real-time Features
- âœ… **è§’è‰²è®¤è¯** / Role-based authentication
- âœ… **äº‹ä»¶æˆ¿é—´** / Event rooms
- âœ… **å®æ—¶å¹¿æ’­** / Real-time broadcasting
- âœ… **QRç é›†æˆ** / QR code integration
- âœ… **æ¯”èµ›ç»“æœ** / Match results
- âœ… **å¥–åŠ±é€šçŸ¥** / Reward notifications
- âœ… **å¥åº·æ£€æŸ¥** / Health monitoring
- âœ… **è‡ªåŠ¨é‡è¿** / Auto-reconnection
- **Testing**: Comprehensive test suite with colored output
- **Error Handling**: Graceful error responses with bilingual messages

**æ•°æ®åº“æ¶æ„ / Database Schema**
- **æ ¸å¿ƒè¡¨ï¼ˆ11ä¸ªï¼‰/ Core Tables (11)**
  - users (ç”¨æˆ·è¡¨)
  - venues (åœºé¦†è¡¨)
  - events (æ´»åŠ¨è¡¨)
  - athletes (è¿åŠ¨å‘˜è¡¨)
  - event_participants (æ´»åŠ¨å‚ä¸è€…è¡¨)
  - qr_codes (äºŒç»´ç è¡¨)
  - qr_scans (äºŒç»´ç æ‰«æè¡¨)
  - transactions (äº¤æ˜“è¡¨)
  - rewards (å¥–åŠ±è¡¨)
  - analytics (åˆ†æè¡¨)
  - invite_codes (é‚€è¯·ç è¡¨)

- **å¢å¼ºè¡¨ï¼ˆ9ä¸ªï¼‰/ Enhanced Tables (9)** ğŸ†•
  - substitute_players (å€™è¡¥çƒå‘˜è¡¨)
  - event_contingencies (æ´»åŠ¨çªå‘æƒ…å†µè¡¨)
  - refund_transactions (é€€æ¬¾äº¤æ˜“è¡¨)
  - emergency_notifications (ç´§æ€¥é€šçŸ¥è¡¨)
  - weather_conditions (å¤©æ°”æ¡ä»¶è¡¨)
  - venue_availability (åœºé¦†å¯ç”¨æ€§è¡¨)
  - system_alerts (ç³»ç»Ÿè­¦æŠ¥è¡¨)
  - compensation_records (è¡¥å¿è®°å½•è¡¨)
  - schema_backup (æ¶æ„å¤‡ä»½è¡¨)

**ç°å®çªå‘æƒ…å†µå¤„ç† / Real-World Contingency Handling** ğŸš¨
- ğŸƒâ€â™‚ï¸ **å€™è¡¥çƒå‘˜ç³»ç»Ÿ**: 4çº§ä¼˜å…ˆçº§ï¼Œè‡ªåŠ¨æ¿€æ´»ï¼Œå¯é æ€§è¯„åˆ†
- ğŸŒ¦ï¸ **å¤©æ°”ç›‘æ§**: å®æ—¶å¤©æ°”APIï¼Œå®‰å…¨è¯„ä¼°ï¼Œè‡ªåŠ¨å–æ¶ˆ
- ğŸ¢ **åœºé¦†ç®¡ç†**: å¯ç”¨æ€§è¿½è¸ªï¼Œå®¹é‡è°ƒæ•´ï¼Œå¤‡é€‰åœºé¦†
- ğŸ’¸ **ç´§æ€¥é€€æ¬¾**: è‡ªåŠ¨é€€æ¬¾å¤„ç†ï¼Œæ‰¹é‡æ“ä½œï¼ŒåŒºå—é“¾æ‰§è¡Œ
- ğŸ“± **å¤šæ¸ é“é€šçŸ¥**: SMS/Email/Pushï¼Œç´§æ€¥çº§åˆ«ï¼Œé€è¾¾è¿½è¸ª
- ğŸ”§ **ç³»ç»Ÿç›‘æ§**: å®æ—¶è­¦æŠ¥ï¼Œè‡ªåŠ¨ä¿®å¤ï¼Œæ€§èƒ½è¿½è¸ª
- ğŸ’° **è¡¥å¿å¤„ç†**: å¤šç§è¡¥å¿ç±»å‹ï¼Œå®¡æ‰¹æµç¨‹ï¼Œæ”¯ä»˜è¿½è¸ª

**Web2ä¼˜å…ˆæ¶æ„ / Web2-First Architecture**
- ğŸ—ï¸ **PostgreSQL**: å¤„ç†æ‰€æœ‰ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å­˜å‚¨
- âš¡ **è¶…ç®€åŒ–æ™ºèƒ½åˆçº¦**: ä»…å¤„ç†CHZè½¬è´¦ï¼ˆ5ä¸ªå‡½æ•°ï¼‰
- ğŸ” **JWTè®¤è¯**: åŸºäºé’±åŒ…ç­¾åçš„èº«ä»½éªŒè¯
- ğŸ“Š **å®æ—¶æ•°æ®**: WebSocketæ¨é€æ›´æ–°
- ğŸ’° **è™šæ‹Ÿä½™é¢**: æ•°æ®åº“è¿½è¸ªç”¨æˆ·èµ„äº§
- ğŸ›¡ï¸ **å®¹é”™è®¾è®¡**: å…¨é¢çªå‘æƒ…å†µå¤„ç†å’Œæ¢å¤æœºåˆ¶

## ğŸ“Š æ ¸å¿ƒç®—æ³• / Core Algorithm

### æˆ˜æ–—åŠ›è¯„åˆ†å…¬å¼ / Combat Power Scoring Formula

```typescript
const calculateCombatPower = (team: Team): number => {
  // åŠ æƒè¯„åˆ†å…¬å¼ï¼šå†å²èƒœç‡60% + å¹´é¾„å› å­25% + ä¼¤ç—…å½±å“15%
  const winRateScore = team.winRate * 0.6;
  const ageScore = (35 - team.avgAge) * 0.25 * 2;
  const injuryScore = (5 - team.injuryCount) * 0.15 * 20;
  
  const totalScore = winRateScore + ageScore + injuryScore;
  return Math.round(Math.max(0, Math.min(100, totalScore)));
};
```

### è¯„åˆ†æƒé‡åˆ†é… / Scoring Weight Distribution

| ç»´åº¦ / Dimension | æƒé‡ / Weight | è¯´æ˜ / Description |
|------------------|---------------|-------------------|
| å†å²èƒœç‡ / Win Rate | 60% | çƒé˜Ÿåœ¨ä¸–ç•Œæ¯å†å²ä¸Šçš„è·èƒœæ¦‚ç‡ |
| å¹³å‡å¹´é¾„ / Average Age | 25% | å¹´é¾„ç»“æ„å¯¹ä½“èƒ½å’Œç»éªŒçš„å½±å“ |
| ä¼¤ç—…æƒ…å†µ / Injury Status | 15% | å…³é”®çƒå‘˜ä¼¤ç—…å¯¹æ•´ä½“å®åŠ›çš„å½±å“ |

## ğŸ† 2022ä¸–ç•Œæ¯å…«å¼ºæ•°æ® / 2022 World Cup Quarterfinals Data

| çƒé˜Ÿ / Team | èƒœç‡ / Win Rate | å¹³å‡å¹´é¾„ / Avg Age | æ ¸å¿ƒçƒå‘˜ / Star Player | æˆ˜æ–—åŠ›è¯„åˆ† / Combat Score |
|-------------|----------------|-------------------|----------------------|--------------------------|
| ğŸ‡§ğŸ‡· å·´è¥¿ Brazil | 82% | 27.8å² | Neymar Jr. | 88åˆ† |
| ğŸ‡«ğŸ‡· æ³•å›½ France | 78% | 26.2å² | Kylian MbappÃ© | 85åˆ† |
| ğŸ‡¦ğŸ‡· é˜¿æ ¹å»· Argentina | 75% | 28.5å² | Lionel Messi | 82åˆ† |
| ğŸ‡³ğŸ‡± è·å…° Netherlands | 72% | 27.2å² | Virgil van Dijk | 79åˆ† |
| ğŸ‡µğŸ‡¹ è‘¡è„ç‰™ Portugal | 70% | 28.1å² | Cristiano Ronaldo | 76åˆ† |
| ğŸ‡¬ğŸ‡§ è‹±æ ¼å…° England | 68% | 26.5å² | Harry Kane | 75åˆ† |
| ğŸ‡­ğŸ‡· å…‹ç½—åœ°äºš Croatia | 65% | 29.8å² | Luka ModriÄ‡ | 71åˆ† |
| ğŸ‡²ğŸ‡¦ æ‘©æ´›å“¥ Morocco | 58% | 26.8å² | Achraf Hakimi | 67åˆ† |

## ğŸ® ä½¿ç”¨æµç¨‹ / User Flow

### 1. çƒé˜Ÿé€‰æ‹© / Team Selection
- æµè§ˆ2022ä¸–ç•Œæ¯å…«å¼ºçƒé˜Ÿå¡ç‰‡
- ç‚¹å‡»é€‰æ‹©å¯¹æˆ˜åŒæ–¹
- é¢„è§ˆçƒé˜ŸåŸºç¡€æ•°æ®ï¼ˆèƒœç‡ã€å¹´é¾„ã€FIFAæ’åï¼‰

### 2. AIåˆ†æ / AI Analysis  
- ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—åŒæ–¹æˆ˜æ–—åŠ›è¯„åˆ†
- AIç”Ÿæˆä¸“ä¸šçš„æˆ˜æœ¯åˆ†æè§£è¯´
- å¯è§†åŒ–å±•ç¤ºè¯„åˆ†å¯¹æ¯”ç»“æœ

### 3. ç²‰ä¸æŠ•ç¥¨ / Fan Voting
- è¿æ¥Web3é’±åŒ…ï¼ˆWalletConnectï¼‰
- éªŒè¯Fan TokenæŒæœ‰æƒ…å†µ
- å‚ä¸é¢„æµ‹æŠ•ç¥¨å¹¶æŸ¥çœ‹å®æ—¶ç»“æœ

### 4. æ™ºèƒ½åˆçº¦ä¸‹æ³¨ç³»ç»Ÿ / Smart Contract Betting System
- **Web3é’±åŒ…é›†æˆ**: æ”¯æŒMetaMaskç­‰é’±åŒ…è¿æ¥
- **Chilizé“¾æ”¯æŒ**: éƒ¨ç½²åœ¨Chiliz Spicyæµ‹è¯•ç½‘ (ChainID: 88882)
- **åŸç”ŸCHZæ”¯ä»˜**: ä½¿ç”¨åŸç”ŸCHZä»£å¸è¿›è¡Œä¸‹æ³¨ï¼Œæ— éœ€ERC20ä»£å¸
- **æ™ºèƒ½åˆçº¦åœ°å€**: `0x0Aa8861bd3691F8dd92291Dd639d43ACb17aB5f5`

#### ä¸‹æ³¨æœºåˆ¶ / Betting Mechanism
- **æœ€ä½ä¸‹æ³¨**: 1 CHZèµ·æŠ•
- **æ‰‹ç»­è´¹**: 5%ä¸‹æ³¨æ‰‹ç»­è´¹ + 5%æå–æ‰‹ç»­è´¹
- **éé›¶å’Œæ¸¸æˆ**: ç”¨æˆ·å¯è·å¾—100%æœ¬é‡‘è¿”è¿˜ + å¥–åŠ±æ± åˆ†æˆ
- **å¥–åŠ±åˆ†é…**: è·èƒœæ–¹70%å¥–åŠ±æ± ï¼Œå¤±è´¥æ–¹30%å¥–åŠ±æ± 

### 5. ç®¡ç†å‘˜åŠŸèƒ½ / Admin Features
- **ç®¡ç†å‘˜é’±åŒ…éªŒè¯** / Admin Wallet Verification
  - ç®¡ç†å‘˜åœ°å€: `0x0d87d8E1def9cA4A5f1BE181dc37c9ed9622c8d5`
  - æƒé™æ§åˆ¶å’Œèº«ä»½éªŒè¯ / Permission control and authentication

- **8æ”¯é˜Ÿä¼çµæ´»ç®¡ç†** / 8 Teams Flexible Management
  - ğŸ‡§ğŸ‡· å·´è¥¿ Brazil | ğŸ‡«ğŸ‡· æ³•å›½ France | ğŸ‡¦ğŸ‡· é˜¿æ ¹å»· Argentina | ğŸ‡³ğŸ‡± è·å…° Netherlands
  - ğŸ‡µğŸ‡¹ è‘¡è„ç‰™ Portugal | ğŸ‡¬ğŸ‡§ è‹±æ ¼å…° England | ğŸ‡­ğŸ‡· å…‹ç½—åœ°äºš Croatia | ğŸ‡²ğŸ‡¦ æ‘©æ´›å“¥ Morocco
  - ä»»æ„é˜Ÿä¼ç»„åˆå¯¹æˆ˜ / Any team combination matchups
  - åŠ¨æ€matchIdç”Ÿæˆ / Dynamic matchId generation

- **æ¯”èµ›ç®¡ç†åŠŸèƒ½** / Match Management Functions
  - åˆ›å»ºæ–°æ¯”èµ› (Create New Match) - è‡ªåŠ¨æ£€æµ‹å¯ç”¨ID
  - åˆ é™¤ç°æœ‰æ¯”èµ› (Delete Existing Match) - ä»…é™æ— ä¸‹æ³¨æ¯”èµ›
  - æ¯”èµ›åˆ—è¡¨æŸ¥çœ‹ (View Match List) - å®æ—¶çŠ¶æ€ç›‘æ§
  - æ™ºèƒ½åˆçº¦é›†æˆ (Smart Contract Integration) - æ— ç¼å¯¹æ¥

- **æ™ºèƒ½åˆçº¦ç®¡ç†** / Smart Contract Management
  - æ³¨å…¥æ¯”èµ›å¥–åŠ±æ±  (Inject Reward Pool) - æ”¯æŒä»»æ„é‡‘é¢
  - å…¬å¸ƒæ¯”èµ›ç»“æœ (Settle Match) - é˜Ÿä¼1æˆ–é˜Ÿä¼2è·èƒœ
  - é‡ç½®æ¯”èµ›çŠ¶æ€ (Reset Match) - æ¸…ç©ºæ‰€æœ‰æ•°æ®
  - å®æ—¶æ•°æ®åŒæ­¥ (Real-time Data Sync) - è‡ªåŠ¨åˆ·æ–°çŠ¶æ€

### 6. ç»“æœç»Ÿè®¡ / Results Statistics
- å®æ—¶ä¸‹æ³¨æ•°æ®å¯è§†åŒ–
- å¥–åŠ±æ± å’Œä¸‹æ³¨æ€»é¢å±•ç¤º
- ä¸ªäººä¸‹æ³¨è®°å½•è¿½è¸ª
- å¥–åŠ±é¢†å–çŠ¶æ€ç›‘æ§

### 7. æ™ºèƒ½é‡å¤ä¸‹æ³¨è§£å†³æ–¹æ¡ˆ / Smart Duplicate Betting Solution

#### é—®é¢˜èƒŒæ™¯ / Problem Background
å½“ç”¨æˆ·åœ¨é‡ç½®å’Œåˆ é™¤æ¯”èµ›åé‡æ–°åˆ›å»ºç›¸åŒé˜Ÿä¼çš„æ¯”èµ›æ—¶ï¼Œå¯èƒ½é‡åˆ°"Already bet"é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºæ™ºèƒ½åˆçº¦ä¸­çš„ç”¨æˆ·ä¸‹æ³¨æ˜ å°„æ²¡æœ‰è¢«æ¸…ç©ºã€‚

When users recreate matches with the same teams after resetting and deleting, they may encounter "Already bet" errors because user betting mappings in the smart contract are not cleared.

#### å‰ç«¯è§£å†³æ–¹æ¡ˆ / Frontend Solution
æˆ‘ä»¬å®ç°äº†æ™ºèƒ½çš„å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡æƒé™åˆ†ç¦»æ¥è§£å†³é—®é¢˜ï¼š

We implemented an intelligent frontend solution through permission separation:

**ğŸ”§ æ ¸å¿ƒæœºåˆ¶ / Core Mechanism:**
- **æƒé™åˆ†ç¦»**: ç”¨æˆ·æ— æ³•åˆ›å»ºæ¯”èµ›ï¼Œåªèƒ½ç”±ç®¡ç†å‘˜åˆ›å»º
- **ç®¡ç†å‘˜æ™ºèƒ½åˆ›å»º**: ç®¡ç†å‘˜å¯ä»¥å¼ºåˆ¶åˆ›å»ºå”¯ä¸€IDçš„æ¯”èµ›
- **ç”¨æˆ·å‹å¥½æç¤º**: å½“ç”¨æˆ·é‡åˆ°é‡å¤ä¸‹æ³¨é”™è¯¯æ—¶ï¼Œæç¤ºè”ç³»ç®¡ç†å‘˜
- **è‡ªåŠ¨é‡è¯•æœºåˆ¶**: ç®¡ç†å‘˜åˆ›å»ºå¤±è´¥æ—¶è‡ªåŠ¨å°è¯•å”¯ä¸€ID

**ğŸ› ï¸ æŠ€æœ¯å®ç° / Technical Implementation:**

*ç”¨æˆ·ç«¯ / User Side:*
```typescript
// ç”¨æˆ·é‡åˆ°Already beté”™è¯¯æ—¶çš„å¤„ç† / Handle Already bet error for users
const handleContactAdmin = () => {
  alert('Please contact the administrator to create a new match for these teams.')
}
```

*ç®¡ç†å‘˜ç«¯ / Admin Side:*
```typescript
// ç®¡ç†å‘˜æ™ºèƒ½åˆ›å»ºæ¯”èµ› / Admin smart match creation
const handleCreateMatch = async () => {
  try {
    // ç›´æ¥åˆ›å»ºæ–°æ¯”èµ›ï¼Œé¿å…è¿æ¥ç°æœ‰æ¯”èµ›
    const contractMatchId = await createMatch(teamA, teamB)
  } catch (error) {
    if (error.message.includes('Match exists')) {
      // è‡ªåŠ¨é‡è¯•åˆ›å»ºå”¯ä¸€IDæ¯”èµ›
      const uniqueMatchId = await createMatch(teamA, teamB)
    }
  }
}
```

**âœ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ– / UX Optimization:**
- ç”¨æˆ·é‡åˆ°é”™è¯¯æ—¶æä¾›æ¸…æ™°çš„è§£å†³æŒ‡å¼•
- ç®¡ç†å‘˜è·å¾—æ›´å¼ºå¤§çš„æ¯”èµ›ç®¡ç†å·¥å…·
- åŒè¯­é”™è¯¯æç¤ºå’Œæ“ä½œæŒ‡å¯¼
- æƒé™åˆ†ç¦»ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§

### 8. å¥–åŠ±é¢†å–æƒé™é—®é¢˜è§£å†³æ–¹æ¡ˆ / Reward Claiming Permission Issue Solution

#### é—®é¢˜æè¿° / Problem Description
ç”¨æˆ·åœ¨ç®¡ç†å‘˜ç»“ç®—æ¯”èµ›åå°è¯•é¢†å–å¥–åŠ±æ—¶ï¼Œå¯èƒ½é‡åˆ°"Only admin"é”™è¯¯ã€‚è¿™é€šå¸¸ç”±ä»¥ä¸‹åŸå› å¼•èµ·ï¼š

Users may encounter "Only admin" error when trying to claim rewards after admin settles the match. This is usually caused by:

**ğŸ” å¸¸è§åŸå›  / Common Causes:**
- **é’±åŒ…åˆ‡æ¢çŠ¶æ€æ··ä¹±**: ä»ç®¡ç†å‘˜é’±åŒ…åˆ‡æ¢åˆ°ç”¨æˆ·é’±åŒ…åï¼Œå‰ç«¯çŠ¶æ€æœªæ­£ç¡®æ›´æ–°
- **ç¼“å­˜é—®é¢˜**: æµè§ˆå™¨ç¼“å­˜äº†é”™è¯¯çš„æƒé™çŠ¶æ€
- **å‡½æ•°è°ƒç”¨æ··æ·†**: åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½è°ƒç”¨äº†é”™è¯¯çš„åˆçº¦å‡½æ•°
- **çŠ¶æ€åŒæ­¥å»¶è¿Ÿ**: åˆçº¦çŠ¶æ€ä¸å‰ç«¯çŠ¶æ€ä¸åŒæ­¥

**Common Causes:**
- **Wallet switching state confusion**: Frontend state not properly updated after switching from admin to user wallet
- **Caching issues**: Browser cached incorrect permission state  
- **Function call confusion**: Wrong contract function might be called in some cases
- **State sync delay**: Contract state and frontend state out of sync

#### è§£å†³æ–¹æ¡ˆ / Solutions

**ğŸ› ï¸ æŠ€æœ¯ä¿®å¤ / Technical Fixes:**
```typescript
// 1. å¢å¼ºçš„æƒé™æ£€æŸ¥ / Enhanced permission check
const claimReward = async (matchId: number): Promise<boolean> => {
  // ç¡®ä¿ä¸æ˜¯ç®¡ç†å‘˜åœ°å€åœ¨è°ƒç”¨ / Ensure admin address is not calling
  const ADMIN_ADDRESS = '0x0d87d8E1def9cA4A5f1BE181dc37c9ed9622c8d5'
  if (address.toLowerCase() === ADMIN_ADDRESS.toLowerCase()) {
    throw new Error('Admin should not claim rewards, only users can claim')
  }
  
  // éªŒè¯æ¯”èµ›çŠ¶æ€å’Œç”¨æˆ·ä¸‹æ³¨ / Verify match state and user bet
  const matchInfo = await contract.getMatch(matchId)
  const userBetInfo = await contract.getUserBet(matchId, address)
  // ... additional validations
}

// 2. é’±åŒ…åˆ‡æ¢æ—¶çŠ¶æ€æ¸…ç† / State cleanup on wallet switch
useEffect(() => {
  setError(null)
  setUserBet(null)
  if (currentMatchId && address && isConnected) {
    refreshUserBet(currentMatchId)
  }
}, [address, isConnected])
```

**ğŸ‘¤ ç”¨æˆ·æ“ä½œæŒ‡å— / User Operation Guide:**
1. **åˆ·æ–°é¡µé¢** / Refresh page - æ¸…ç†æ‰€æœ‰ç¼“å­˜çŠ¶æ€
2. **é‡æ–°è¿æ¥é’±åŒ…** / Reconnect wallet - ç¡®ä¿æƒé™çŠ¶æ€æ­£ç¡®
3. **ç¡®è®¤é’±åŒ…åœ°å€** / Confirm wallet address - ä½¿ç”¨ç”¨æˆ·é’±åŒ…è€Œéç®¡ç†å‘˜é’±åŒ…
4. **æ¸…ç†æµè§ˆå™¨ç¼“å­˜** / Clear browser cache - å¦‚é—®é¢˜æŒç»­å­˜åœ¨

**ğŸ”§ è°ƒè¯•å·¥å…· / Debugging Tools:**
- **å¼€å‘æ¨¡å¼è°ƒè¯•ä¿¡æ¯**: æ˜¾ç¤ºå½“å‰åœ°å€ã€ç®¡ç†å‘˜çŠ¶æ€ã€æ¯”èµ›ä¿¡æ¯ç­‰
- **è¯¦ç»†é”™è¯¯æç¤º**: é’ˆå¯¹ä¸åŒé”™è¯¯ç±»å‹æä¾›å…·ä½“è§£å†³æ–¹æ¡ˆ
- **ä¸€é”®åˆ·æ–°åŠŸèƒ½**: å¿«é€Ÿé‡ç½®é¡µé¢çŠ¶æ€

**Development Mode Debug Info**: Shows current address, admin status, match info, etc.
**Detailed Error Messages**: Specific solutions for different error types  
**One-click Refresh**: Quick page state reset

### 9. Next.js æ°´åˆé”™è¯¯ä¿®å¤ / Next.js Hydration Error Fix

#### é—®é¢˜æè¿° / Problem Description
åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ° React æ°´åˆé”™è¯¯ï¼Œè¡¨ç°ä¸ºæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„ HTML ä¸å®¢æˆ·ç«¯æ¸²æŸ“çš„ HTML ä¸åŒ¹é…ã€‚

During development, encountered React hydration errors where server-side rendered HTML doesn't match client-side rendered HTML.

**ğŸ” é”™è¯¯è¡¨ç° / Error Symptoms:**
```
Warning: Expected server HTML to contain a matching <button> in <div>.
Error: Hydration failed because the initial UI does not match what was rendered on the server.
```

**ğŸ¯ æ ¹æœ¬åŸå›  / Root Causes:**
- **localStorage ä¾èµ–**: `getClassicMatchups()` åœ¨æœåŠ¡å™¨ç«¯è¿”å›é»˜è®¤å€¼ï¼Œå®¢æˆ·ç«¯ä» localStorage è¯»å–
- **æ¡ä»¶æ¸²æŸ“**: åŸºäºé’±åŒ…è¿æ¥çŠ¶æ€çš„ç®¡ç†å‘˜æƒé™æ£€æŸ¥
- **æµè§ˆå™¨ API**: æœåŠ¡å™¨ç«¯æ— æ³•è®¿é—® `window`ã€`localStorage` ç­‰æµè§ˆå™¨ API

**Root Causes:**
- **localStorage dependency**: `getClassicMatchups()` returns defaults on server, reads from localStorage on client
- **Conditional rendering**: Admin permission checks based on wallet connection state
- **Browser APIs**: Server-side cannot access `window`, `localStorage`, etc.

#### è§£å†³æ–¹æ¡ˆ / Solutions

**ğŸ› ï¸ æŠ€æœ¯ä¿®å¤ / Technical Fixes:**
```typescript
// 1. å»¶è¿ŸåŠ è½½å®¢æˆ·ç«¯æ•°æ® / Delayed loading of client data
const [isMounted, setIsMounted] = useState(false)
const [matchups, setMatchups] = useState<any[]>([])
const [matchupsLoaded, setMatchupsLoaded] = useState(false)

useEffect(() => {
  setIsMounted(true)
  setMatchups(getClassicMatchups()) // åªåœ¨å®¢æˆ·ç«¯åŠ è½½ / Load only on client
  setMatchupsLoaded(true)
}, [])

// 2. æ¡ä»¶æ¸²æŸ“é˜²æŠ¤ / Conditional rendering protection
{isMounted && isAdmin && (
  <button>Admin Button</button>
)}

// 3. æ•°æ®åŠ è½½å®Œæˆåæ¸²æŸ“ / Render after data loading
{matchupsLoaded && (
  <div>Classic Matchups Content</div>
)}
```

**ğŸ“‹ ä¿®å¤æ¸…å• / Fix Checklist:**
- âœ… ç®¡ç†å‘˜çŠ¶æ€å»¶è¿Ÿåˆå§‹åŒ– / Delayed admin state initialization
- âœ… å¯¹æˆ˜æ•°æ®å®¢æˆ·ç«¯åŠ è½½ / Client-side matchups loading  
- âœ… æ¡ä»¶æ¸²æŸ“å¢åŠ æŒ‚è½½æ£€æŸ¥ / Added mount check to conditional rendering
- âœ… localStorage è®¿é—®ä¿æŠ¤ / Protected localStorage access
- âœ… è°ƒè¯•ä¿¡æ¯å»¶è¿Ÿæ˜¾ç¤º / Delayed debug info display

**ğŸ¯ æ•ˆæœ / Results:**
- æ¶ˆé™¤æ‰€æœ‰æ°´åˆé”™è¯¯ / Eliminated all hydration errors
- ä¿æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“æ€§èƒ½ / Maintained SSR performance  
- ç¡®ä¿å®¢æˆ·ç«¯çŠ¶æ€ä¸€è‡´æ€§ / Ensured client state consistency
- æ”¹å–„å¼€å‘ä½“éªŒ / Improved development experience

## ğŸŒ å›½é™…åŒ–ç³»ç»Ÿ / Internationalization System

åº”ç”¨é‡‡ç”¨ç‹¬ç«‹çš„å›½é™…åŒ–æ¨¡å—è®¾è®¡ï¼Œæ‰€æœ‰æ–‡æœ¬ç»Ÿä¸€ç®¡ç†ï¼Œæ”¯æŒå®Œæ•´çš„ä¸­è‹±æ–‡åˆ‡æ¢ï¼š

The application uses an independent internationalization module design with unified text management, supporting complete Chinese-English switching:

### æ¶æ„ç‰¹ç‚¹ / Architecture Features
- **ç‹¬ç«‹æ¨¡å—**: æ‰€æœ‰ç¿»è¯‘æ–‡æœ¬é›†ä¸­åœ¨ `app/utils/i18n.ts` ä¸­ç®¡ç†
- **ç±»å‹å®‰å…¨**: ä½¿ç”¨TypeScriptæ¥å£ç¡®ä¿ç¿»è¯‘å®Œæ•´æ€§
- **ä¸Šä¸‹æ–‡é›†æˆ**: é€šè¿‡React Contextæä¾›å…¨å±€è¯­è¨€çŠ¶æ€
- **åŒé‡å‡½æ•°**: `t()` ç”¨äºæ ‡å‡†ç¿»è¯‘ï¼Œ`tTeam()` ç”¨äºçƒé˜Ÿåç§°ç¿»è¯‘

### ä½¿ç”¨æ–¹å¼ / Usage
```typescript
// æ ‡å‡†ç¿»è¯‘ / Standard translation
const title = t('2022 World Cup Quarterfinals')

// çƒé˜Ÿåç§°ç¿»è¯‘ / Team name translation  
const teamName = tTeam(team.nameEn, team.nameCn)
```

## ğŸ¯ ç»å…¸å¯¹æˆ˜ä¸è‡ªå®šä¹‰é˜Ÿä¼ / Classic Matchups and Custom Teams

### ç»å…¸å¯¹æˆ˜ / Classic Matchups
ç³»ç»Ÿé¢„è®¾äº†å››åœºç»å…¸å¯¹æˆ˜ç»„åˆï¼Œè®©çƒè¿·å¿«é€Ÿä½“éªŒAIé¢„æµ‹åŠŸèƒ½ï¼š

The system presets four classic matchup combinations for fans to quickly experience AI prediction features:

### è‡ªå®šä¹‰é˜Ÿä¼æ˜¾ç¤ºä¼˜åŒ– / Custom Team Display Optimization

**ğŸ¨ è§†è§‰æ ‡è¯†ç³»ç»Ÿ / Visual Identity System:**
- **è‡ªå®šä¹‰é˜Ÿä¼æ ‡è¯†**: ä½¿ç”¨ âš¡ å›¾æ ‡æ›¿ä»£å›½æ——
- **æ¡ä»¶æ¸²æŸ“**: æ ¹æ®é˜Ÿä¼ç±»å‹æ™ºèƒ½æ˜¾ç¤ºä¸åŒUIå…ƒç´ 
- **åŒè¯­æ ‡è¯†**: æ˜¾ç¤º"è‡ªå®šä¹‰é˜Ÿä¼ / Custom Team"æ ‡ç­¾
- **ç»Ÿä¸€è®¾è®¡è¯­è¨€**: ä¿æŒä¸å®˜æ–¹é˜Ÿä¼ä¸€è‡´çš„è§†è§‰é£æ ¼

**ğŸ”§ æŠ€æœ¯å®ç° / Technical Implementation:**
```typescript
// è‡ªå®šä¹‰é˜Ÿä¼è¯†åˆ«å‡½æ•° / Custom team identification function
export const isCustomTeam = (teamId: string): boolean => {
  return teamId.startsWith('team_') && /^team_\d+$/.test(teamId);
};

// æ¡ä»¶æ¸²æŸ“ç¤ºä¾‹ / Conditional rendering example
{!isCustomTeam(team.id) && (
  <img src={`https://flagsapi.com/${team.countryCode}/flat/64.png`} />
)}
{isCustomTeam(team.id) && (
  <div className="bg-gray-700 rounded flex items-center justify-center">
    <span className="text-4xl">âš¡</span>
  </div>
)}
```

**ğŸ“± ç•Œé¢é€‚é… / Interface Adaptation:**
- **å¯¹æˆ˜å¡ç‰‡**: è‡ªå®šä¹‰é˜Ÿä¼ä¸æ˜¾ç¤ºå›½æ——ï¼Œåªæ˜¾ç¤ºé˜Ÿä¼åç§°
- **é€‰æ‹©ç•Œé¢**: è‡ªå®šä¹‰é˜Ÿä¼ä½¿ç”¨ç‰¹æ®Šå›¾æ ‡å’Œæ ‡ç­¾
- **å¯¹æˆ˜é¡µé¢**: è‡ªå®šä¹‰é˜Ÿä¼ä½¿ç”¨ä¸€è‡´çš„è§†è§‰é£æ ¼
- **æŠ•ç¥¨ç•Œé¢**: é˜Ÿä¼åç§°æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘

- **ğŸ‡¦ğŸ‡· é˜¿æ ¹å»· vs ğŸ‡§ğŸ‡· å·´è¥¿** - å—ç¾åŒé›„å¯¹å†³ / South American Rivalry
- **ğŸ‡«ğŸ‡· æ³•å›½ vs ğŸ‡¬ğŸ‡§ è‹±æ ¼å…°** - æ¬§æ´²è±ªé—¨å¯¹è¯ / European Giants Dialogue  
- **ğŸ‡µğŸ‡¹ è‘¡è„ç‰™ vs ğŸ‡²ğŸ‡¦ æ‘©æ´›å“¥** - æ¬§éä¹‹æˆ˜ / Europe vs Africa Battle
- **ğŸ‡³ğŸ‡± è·å…° vs ğŸ‡­ğŸ‡· å…‹ç½—åœ°äºš** - æˆ˜æœ¯å¤§å¸ˆå¯¹å†³ / Tactical Masters Clash

### é¡µé¢å¯¼èˆªä¼˜åŒ– / Page Navigation Optimization
- **å†å²ç®¡ç†**: ä½¿ç”¨HTML5 History APIç®¡ç†é¡µé¢çŠ¶æ€
- **åé€€ä¼˜åŒ–**: ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®è¿”å›åˆ°é€‰æ‹©é¡µé¢è€Œéç¦»å¼€åº”ç”¨
- **çŠ¶æ€ä¿æŒ**: åœ¨é¡µé¢åˆ‡æ¢æ—¶ä¿æŒåº”ç”¨å†…éƒ¨çŠ¶æ€

## ğŸ”Œ é›†æˆè¯´æ˜ / Integration Guide

### Chiliz SDK é›†æˆ / Chiliz SDK Integration

```typescript
// ç¤ºä¾‹ï¼šè¿æ¥é’±åŒ…å’ŒéªŒè¯Fan Token
import { ChilizSDK } from '@chiliz/sdk';

const connectWallet = async () => {
  const chiliz = new ChilizSDK();
  const wallet = await chiliz.connect();
  const tokens = await chiliz.getFanTokens(wallet.address);
  return tokens.length > 0; // éªŒè¯æ˜¯å¦æŒæœ‰ä»»ä½•Fan Token
};
```

### AIè§£è¯´ç”Ÿæˆ / AI Commentary Generation

```typescript
// ç¤ºä¾‹ï¼šChatGPT Promptè®¾è®¡
const generateCommentary = async (teamA: Team, teamB: Team) => {
  const prompt = `
    ä½œä¸ºä¸“ä¸šä½“è‚²è§£è¯´å‘˜ï¼Œåˆ†æä»¥ä¸‹æ¯”èµ›ï¼š
    ${teamA.name} vs ${teamB.name}
    ${teamA.name}: èƒœç‡${teamA.winRate}%, å¹³å‡å¹´é¾„${teamA.avgAge}å²
    ${teamB.name}: èƒœç‡${teamB.winRate}%, å¹³å‡å¹´é¾„${teamB.avgAge}å²
    è¯·ç”¨æ¿€æƒ…ä¸”ä¸“ä¸šçš„è¯­è¨€é¢„æµ‹æ¯”èµ›èµ°å‘ã€‚
  `;
  // è°ƒç”¨ChatGPT API
};
```

## ğŸ“ˆ è·¯çº¿å›¾ / Roadmap

### Phase 1: MVPæ ¸å¿ƒåŠŸèƒ½ âœ…
- [x] åŸºç¡€UIç•Œé¢æ­å»º
- [x] æˆ˜æ–—åŠ›è¯„åˆ†ç®—æ³•
- [x] çƒé˜Ÿæ•°æ®æ¨¡å‹
- [x] æŠ•ç¥¨åŠŸèƒ½å®ç°

### Phase 2: AIå¢å¼º âœ…
- [x] æ™ºèƒ½è§£è¯´ç”Ÿæˆç³»ç»Ÿ
- [x] åŸºäºçœŸå®æ•°æ®çš„ä¸ªæ€§åŒ–åˆ†æ
- [x] å¤šç»´åº¦æˆ˜æœ¯è§£è¯´
- [ ] é¢„æµ‹å‡†ç¡®åº¦åˆ†æ
- [ ] åŠ¨æ€è¯„åˆ†è°ƒæ•´

### Phase 3: åŒºå—é“¾é›†æˆ ğŸ“‹
- [ ] Chiliz SDKå®Œæ•´é›†æˆ
- [ ] Fan TokenæŒæœ‰éªŒè¯
- [ ] é“¾ä¸ŠæŠ•ç¥¨è®°å½•
- [ ] NFTå¥–åŠ±æœºåˆ¶

### Phase 4: ç¤¾åŒºåŠŸèƒ½ ğŸ“‹
- [ ] ç”¨æˆ·æ’è¡Œæ¦œ
- [ ] é¢„æµ‹å†å²è¿½è¸ª
- [ ] ç¤¾äº¤åˆ†äº«åŠŸèƒ½
- [ ] å¤šè¯­è¨€æ”¯æŒæ‰©å±•

## ğŸ¤ è´¡çŒ®æŒ‡å— / Contributing

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼è¯·å…ˆé˜…è¯»æˆ‘ä»¬çš„è´¡çŒ®æŒ‡å—ã€‚

Welcome to submit Issues and Pull Requests! Please read our contribution guidelines first.

### å¼€å‘è§„èŒƒ / Development Standards

1. **ä»£ç æ³¨é‡Š**: æ‰€æœ‰å‡½æ•°å’Œç»„ä»¶å¿…é¡»åŒ…å«ä¸­è‹±æ–‡åŒè¯­æ³¨é‡Š
2. **ç±»å‹å®‰å…¨**: ä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹å®‰å…¨
3. **å“åº”å¼è®¾è®¡**: æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
4. **æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨React hookså’ŒuseMemoä¼˜åŒ–æ¸²æŸ“

## ğŸ“„ å¼€æºåè®® / License

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥ / Related Links

- [Chiliz å®˜æ–¹æ–‡æ¡£](https://docs.chiliz.com/)
- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Tailwind CSS](https://tailwindcss.com/)
- [TypeScript](https://www.typescriptlang.org/)

## ğŸ“§ è”ç³»æˆ‘ä»¬ / Contact

- é¡¹ç›®ç»´æŠ¤è€…: [Your Name]
- é‚®ç®±: your.email@example.com
- Twitter: [@YourTwitter]

## ğŸ”— æ™ºèƒ½åˆçº¦ / Smart Contract

### åˆçº¦åœ°å€ / Contract Address

- **æµ‹è¯•ç½‘ / Testnet (Chiliz Spicy)**: `0x90C9D004cB071064Ba9B9f091Dc96D76b09E8aBC`
- **ä¸»ç½‘ / Mainnet**: å³å°†éƒ¨ç½² / Coming soon

### åˆçº¦åŠŸèƒ½ / Contract Features

| åŠŸèƒ½ / Feature | è¯´æ˜ / Description | Gasæ¶ˆè€— / Gas Usage |
|---------------|-------------------|-------------------|
| åˆ›å»ºæ¯”èµ› / Create Match | ç®¡ç†å‘˜åˆ›å»ºæ–°æ¯”èµ› / Admin creates new match | ~89,507 gas |
| ä¸‹æ³¨ / Place Bet | ç”¨æˆ·ä½¿ç”¨åŸç”ŸCHZä¸‹æ³¨ / Users bet with native CHZ | ~100,651 gas |
| æ³¨å…¥å¥–åŠ± / Inject Reward | ç®¡ç†å‘˜æ³¨å…¥å¥–åŠ±æ±  / Admin injects reward pool | ~73,017 gas |
| ç»“ç®—æ¯”èµ› / Settle Match | ç®¡ç†å‘˜å…¬å¸ƒç»“æœ / Admin announces result | ~31,644 gas |
| é¢†å–å¥–åŠ± / Claim Reward | ç”¨æˆ·é¢†å–å¥–åŠ± / Users claim rewards | ~80,456 gas |
| é‡ç½®æ¯”èµ› / Reset Match | ç®¡ç†å‘˜é‡ç½®æ¯”èµ›çŠ¶æ€ / Admin resets match state | ~36,877 gas |

### å¥–åŠ±åˆ†é… / Reward Distribution

- **èƒœæ–¹å¥–åŠ± / Winner Reward**: 70% å¥–åŠ±æ±  / 70% of reward pool
- **è´¥æ–¹å¥–åŠ± / Loser Reward**: 30% å¥–åŠ±æ±  / 30% of reward pool
- **å¹³å°è´¹ç”¨ / Platform Fee**: 5% æ€»å¥–åŠ± / 5% of total rewards

### ä½¿ç”¨æ–¹æ³• / Usage

1. **ä¸‹æ³¨ / Place Bet**
```typescript
// ä½¿ç”¨åŸç”ŸCHZä¸‹æ³¨ / Bet with native CHZ
const BET_AMOUNT = ethers.parseEther("1.0"); // 1 CHZ
await contract.placeBet(matchId, teamId, BET_AMOUNT, { 
  value: BET_AMOUNT 
});
```

2. **é¢†å–å¥–åŠ± / Claim Reward**
```typescript
// æ¯”èµ›ç»“æŸåé¢†å–å¥–åŠ± / Claim reward after match settlement
await contract.claimReward(matchId);
```

3. **ç®¡ç†å‘˜åŠŸèƒ½ / Admin Functions**
```typescript
// åˆ›å»ºæ¯”èµ› / Create match
await contract.createMatch(matchId);

// æ³¨å…¥å¥–åŠ±æ±  / Inject reward pool
const REWARD = ethers.parseEther("2.0"); // 2 CHZ
await contract.injectReward(matchId, REWARD, { value: REWARD });

// ç»“ç®—æ¯”èµ› / Settle match
await contract.settleMatch(matchId, winningTeamId);
```

### æµ‹è¯•ç½‘æ°´é¾™å¤´ / Testnet Faucets

1. **ğŸ¥‡ Tatum Faucet**
   - URL: https://tatum.io/faucets/chiliz
   - æ¯å¤©10 CHZ / 10 CHZ per day
   - éœ€è¦æ³¨å†Œ / Registration required

2. **ğŸ¥ˆ Chiliz Official Faucet**
   - URL: https://faucet.chiliz.com
   - æ¯æ¬¡5 CHZ / 5 CHZ per request
   - 24å°æ—¶å†·å´ / 24h cooldown

## âœ… æµç¨‹éªŒè¯ç³»ç»Ÿ / Complete Flow Validation System

### ğŸ”§ è‡ªåŠ¨åŒ–æµ‹è¯• / Automated Testing

æˆ‘ä»¬æä¾›äº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬æ¥éªŒè¯æ‰€æœ‰åŠŸèƒ½ï¼š

We provide complete automated testing scripts to validate all functionality:

```bash
# ğŸ” é›¶Gaså¿«é€ŸéªŒè¯ï¼ˆæ¨èé¦–é€‰ï¼‰| Zero-gas quick validation (recommended first)
npx hardhat run scripts/quick-validation.js --network chilizSpicy

# âš¡ Gasä¼˜åŒ–æµ‹è¯•ï¼ˆæ¨èï¼‰| Gas optimized testing (recommended)
npx hardhat run scripts/gas-optimized-test.js --network chilizSpicyLowGas

# ğŸ“Š å®Œæ•´æµç¨‹æµ‹è¯•ï¼ˆGasæ¶ˆè€—è¾ƒé«˜ï¼‰| Complete flow testing (higher gas usage)
npx hardhat run scripts/complete-flow-test.js --network chilizSpicy

# ğŸ’° ä½™é¢æ£€æŸ¥ | Balance check
npx hardhat run scripts/check-balance.js --network chilizSpicy

# ğŸ† å¥–åŠ±æ± æŸ¥çœ‹ | Reward pool check
npx hardhat run scripts/check-reward-pool.js --network chilizSpicy
```

### âš¡ Gasè´¹ç”¨ä¼˜åŒ– | Gas Cost Optimization

ä¸ºäº†é™ä½æµ‹è¯•æˆæœ¬ï¼Œæˆ‘ä»¬æä¾›äº†å¤šç§ä¼˜åŒ–æ–¹æ¡ˆï¼š

To reduce testing costs, we provide multiple optimization solutions:

#### ä¼˜åŒ–ç­–ç•¥ | Optimization Strategies

1. **æ™ºèƒ½æ“ä½œæ£€æµ‹** / Smart Operation Detection
   - æ£€æŸ¥æ“ä½œæ˜¯å¦å·²å®Œæˆï¼Œé¿å…é‡å¤äº¤æ˜“
   - Check if operations are already completed to avoid duplicate transactions

2. **é™ä½æµ‹è¯•é‡‘é¢** / Reduce Test Amounts
   - ä¸‹æ³¨é‡‘é¢ï¼š2 CHZ â†’ 1 CHZ
   - å¥–åŠ±æ± ï¼š10 CHZ â†’ 5 CHZ
   - Bet amount: 2 CHZ â†’ 1 CHZ
   - Reward pool: 10 CHZ â†’ 5 CHZ

3. **ä¼˜åŒ–Gasä»·æ ¼è®¾ç½®** / Optimize Gas Price Settings
   - æ ‡å‡†ç½‘ç»œï¼š1 gweiï¼ˆä½äºè‡ªåŠ¨å®šä»·ï¼‰
   - è¶…ä½Gasç½‘ç»œï¼š0.5 gweiï¼ˆæµ‹è¯•ä¸“ç”¨ï¼‰
   - Standard network: 1 gwei (lower than auto pricing)
   - Ultra-low gas network: 0.5 gwei (testing only)

4. **æ‰¹é‡æ£€æµ‹ç°æœ‰çŠ¶æ€** / Batch Check Existing State
   - é›¶Gasæ¶ˆè€—çš„åªè¯»éªŒè¯è„šæœ¬
   - Zero-gas read-only validation script

#### Gasæ¶ˆè€—å¯¹æ¯” | Gas Usage Comparison

| æµ‹è¯•æ–¹å¼ / Test Method | Gasæ¶ˆè€— / Gas Usage | æ¨èåœºæ™¯ / Recommended Use |
|----------------------|-------------------|--------------------------|
| é›¶GaséªŒè¯ / Zero-gas validation | 0 CHZ | æ—¥å¸¸çŠ¶æ€æ£€æŸ¥ / Daily status check |
| Gasä¼˜åŒ–æµ‹è¯• / Gas optimized test | ~2-4 CHZ | åŠŸèƒ½éªŒè¯ / Feature validation |
| å®Œæ•´æµç¨‹æµ‹è¯• / Complete flow test | ~8-15 CHZ | å…¨é¢æµ‹è¯• / Comprehensive testing |

### ğŸ“‹ æ‰‹åŠ¨éªŒè¯æŒ‡å— / Manual Validation Guide

è¯¦ç»†çš„æ‰‹åŠ¨æµ‹è¯•æŒ‡å—è¯·å‚è€ƒï¼š**[TESTING_GUIDE.md](./TESTING_GUIDE.md)**

For detailed manual testing guide, please refer to: **[TESTING_GUIDE.md](./TESTING_GUIDE.md)**

### ğŸ§ª éªŒè¯æµç¨‹ / Validation Flow

#### ç®¡ç†å‘˜æµç¨‹ / Admin Flow
1. **åˆ›å»ºæ¯”èµ›** / Create Match â†’ æ™ºèƒ½åˆçº¦åˆ›å»ºæ–°æ¯”èµ›
2. **æ³¨å…¥å¥–åŠ±** / Inject Reward â†’ å‘å¥–åŠ±æ± æ³¨å…¥CHZ
3. **å…¬å¸ƒç»“æœ** / Settle Match â†’ å®£å¸ƒè·èƒœé˜Ÿä¼
4. **é‡ç½®æ¯”èµ›** / Reset Match â†’ æ¸…ç©ºæ¯”èµ›æ•°æ®

#### ç”¨æˆ·æµç¨‹ / User Flow
1. **è¿æ¥é’±åŒ…** / Connect Wallet â†’ MetaMaské’±åŒ…è¿æ¥
2. **é€‰æ‹©é˜Ÿä¼** / Select Teams â†’ é€‰æ‹©å¯¹æˆ˜ç»„åˆ
3. **ä¸‹æ³¨æ“ä½œ** / Place Bet â†’ ä½¿ç”¨CHZä¸‹æ³¨
4. **é¢†å–å¥–åŠ±** / Claim Reward â†’ æ¯”èµ›ç»“æŸåé¢†å–å¥–åŠ±

### ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´ / Test Coverage

- âœ… **æƒé™æ§åˆ¶** / Permission Controlï¼šç®¡ç†å‘˜æƒé™éªŒè¯
- âœ… **æ™ºèƒ½åˆçº¦äº¤äº’** / Smart Contract Interactionï¼šåˆ›å»ºã€ä¸‹æ³¨ã€ç»“ç®—ã€é¢†å–
- âœ… **çŠ¶æ€ç®¡ç†** / State Managementï¼šæŒ‰é’®çŠ¶æ€ã€ç”¨æˆ·æ•°æ®åŒæ­¥
- âœ… **é”™è¯¯å¤„ç†** / Error Handlingï¼šç½‘ç»œé”™è¯¯ã€ä½™é¢ä¸è¶³ã€é‡å¤æ“ä½œ
- âœ… **UI/UXéªŒè¯** / UI/UX Validationï¼šå“åº”å¼è®¾è®¡ã€é€šçŸ¥ç³»ç»Ÿã€å›½é™…åŒ–

### ğŸ¯ éªŒè¯é‡ç‚¹ / Key Validation Points

1. **æŒ‰é’®çŠ¶æ€å‡†ç¡®æ€§** / Button State Accuracy
   - æœªè¿æ¥é’±åŒ…ï¼šæ˜¾ç¤º "Connect Wallet"
   - å·²è¿æ¥æœªä¸‹æ³¨ï¼šæ˜¾ç¤º "Bet on [Team]"
   - å·²ä¸‹æ³¨æœªç»“ç®—ï¼šæ˜¾ç¤º "Bet Placed" / "Already Bet"
   - å·²ç»“ç®—å¯é¢†å–ï¼šæ˜¾ç¤º "Claim Reward"
   - å·²é¢†å–å¥–åŠ±ï¼šæ˜¾ç¤º "Reward Claimed"

2. **è·¨é¡µé¢çŠ¶æ€æŒä¹…åŒ–** / Cross-page State Persistence
   - é¦–æ¬¡ç‚¹å‡»æ¯”èµ›ï¼šè§¦å‘MetaMaskåˆ›å»ºäº¤æ˜“
   - å†æ¬¡ç‚¹å‡»ç›¸åŒæ¯”èµ›ï¼šç›´æ¥è¿æ¥ï¼Œæ— éœ€äº¤æ˜“
   - åˆ·æ–°é¡µé¢åçŠ¶æ€ä¿æŒ

3. **æƒé™æ§åˆ¶æ­£ç¡®æ€§** / Permission Control Accuracy
   - ç®¡ç†å‘˜ï¼šå¯è§"é‡æ–°é€‰æ‹©é˜Ÿä¼"æŒ‰é’®å’Œç®¡ç†é¢æ¿
   - æ™®é€šç”¨æˆ·ï¼šéšè—ç®¡ç†å‘˜ä¸“ç”¨åŠŸèƒ½

## Testing Setup / æµ‹è¯•è®¾ç½®

### Environment Setup / ç¯å¢ƒè®¾ç½®

1. Create a `.env` file in the root directory / åœ¨æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶
2. Add your private key / æ·»åŠ ä½ çš„ç§é’¥:
```
PRIVATE_KEY=your_private_key_here
```

### Test Accounts / æµ‹è¯•è´¦æˆ·

The following accounts are used in the tests / æµ‹è¯•ä¸­ä½¿ç”¨ä»¥ä¸‹è´¦æˆ·:

- Admin: `0x0d87d8E1def9cA4A5f1BE181dc37c9ed9622c8d5`
- Team A Bettor: `0x0f583daF67db8B3287094F1871AD736A91B4A98a`
- Team B Bettor: `0xaeD5E239ACBBE496aAD809941C29444214Eb3e57`

### Running Tests / è¿è¡Œæµ‹è¯•

```bash
npx hardhat test
```

The test suite includes the following scenarios / æµ‹è¯•å¥—ä»¶åŒ…å«ä»¥ä¸‹åœºæ™¯:

1. Contract Deployment / åˆçº¦éƒ¨ç½²
2. Match Creation / åˆ›å»ºæ¯”èµ›
3. Betting (Team A) / æŠ•æ³¨ï¼ˆAé˜Ÿï¼‰
4. Reward Pool Injection / æ³¨å…¥å¥–åŠ±æ± 
5. Match Settlement / ç»“ç®—æ¯”èµ›
6. Reward Claims / é¢†å–å¥–åŠ±
7. Match Reset / é‡ç½®æ¯”èµ›

### Test Matches / æµ‹è¯•æ¯”èµ›

World Cup 2022 Quarterfinals / 2022ä¸–ç•Œæ¯å››åˆ†ä¹‹ä¸€å†³èµ›:

1. Croatia vs Brazil (Match ID: 1)
2. Netherlands vs Argentina (Match ID: 2)
3. Morocco vs Portugal (Match ID: 3)
4. England vs France (Match ID: 4)

## ğŸš€ åŠ¨æ€é˜Ÿä¼ç®¡ç†ç³»ç»Ÿ / Dynamic Team Management System

### ğŸ¯ è§£å†³æ–¹æ¡ˆæ¦‚è¿° / Solution Overview
**æ–°å¢åŠŸèƒ½**: ç®¡ç†å‘˜å¯ä»¥åŠ¨æ€æ·»åŠ è‡ªå®šä¹‰é˜Ÿä¼ï¼Œä½¿ç”¨æ—¶é—´æˆ³ç¡®ä¿å”¯ä¸€æ€§ï¼Œå®Œç¾è§£å†³ç”¨æˆ·é‡å¤æŠ¼æ³¨é—®é¢˜ã€‚

**New Feature**: Administrators can dynamically add custom teams using timestamps to ensure uniqueness, perfectly solving duplicate betting issues.

### ğŸ”§ æ ¸å¿ƒç‰¹æ€§ / Core Features

**1. æ—¶é—´æˆ³å”¯ä¸€IDç”Ÿæˆ / Timestamp-based Unique ID Generation**
```typescript
// ä½¿ç”¨æ—¶é—´æˆ³ç”Ÿæˆå”¯ä¸€é˜Ÿä¼ID / Generate unique team ID using timestamp
const uniqueTeamId = `team_${Date.now()}`;
// ç¤ºä¾‹: team_1672531200000
```

**2. æç®€é˜Ÿä¼æ·»åŠ æµç¨‹ / Ultra-Simple Team Addition Process**
- **æ­¥éª¤1**: ç®¡ç†å‘˜ç‚¹å‡»AdminæŒ‰é’® â†’ è¿›å…¥ç®¡ç†é¢æ¿
- **æ­¥éª¤2**: ç‚¹å‡»"æ·»åŠ é˜Ÿä¼"æŒ‰é’® â†’ æ‰“å¼€æ·»åŠ è¡¨å•
- **æ­¥éª¤3**: å¡«å†™åŸºç¡€ä¿¡æ¯ â†’ 4ä¸ªå¿…å¡«å­—æ®µ
- **æ­¥éª¤4**: æäº¤ä¿å­˜ â†’ ç«‹å³å¯ç”¨äºåˆ›å»ºæ¯”èµ›

**3. å¿…å¡«é˜Ÿä¼ä¿¡æ¯ / Required Team Information**
```
é˜Ÿä¼åç§° / Team Name: "æŸä»£å·" (å¯è‡ªå®šä¹‰ä»»æ„åç§°)
Historical Win Rate: 75% (å†å²èƒœç‡)
Average Age: 28.5 years old (å¹³å‡å¹´é¾„)
Injury Count: 1 people (ä¼¤ç—…æ•°é‡)
```

**4. æ™ºèƒ½é˜Ÿä¼åˆ†ç±»æ˜¾ç¤º / Smart Team Category Display**
- **ğŸ“Š å®˜æ–¹é˜Ÿä¼ / Official Teams**: åŸæœ‰8æ”¯ä¸–ç•Œæ¯é˜Ÿä¼
- **âš¡ è‡ªå®šä¹‰é˜Ÿä¼ / Custom Teams**: ç®¡ç†å‘˜æ·»åŠ çš„é˜Ÿä¼(å¸¦â°æ ‡è¯†)

### ğŸš€ æŠ€æœ¯å®ç° / Technical Implementation

**æ•°æ®å­˜å‚¨æœºåˆ¶ / Data Storage Mechanism:**
```typescript
// localStorageç»“æ„ / localStorage Structure
const dynamicTeamsStorage = {
  teams: [
    {
      id: 'team_1672531200000',        // æ—¶é—´æˆ³å”¯ä¸€ID
      name: 'æŸä»£å·',                   // è‡ªå®šä¹‰åç§°
      winRate: 75,                     // èƒœç‡
      avgAge: 28.5,                    // å¹³å‡å¹´é¾„
      injuryCount: 1,                  // ä¼¤ç—…æ•°é‡
      timestamp: 1672531200000,        // åˆ›å»ºæ—¶é—´æˆ³
      createdBy: 'admin'               // åˆ›å»ºè€…æ ‡è¯†
    }
  ]
};
```

**é˜Ÿä¼è·å–é€»è¾‘ / Team Retrieval Logic:**
```typescript
// è·å–æ‰€æœ‰é˜Ÿä¼ï¼ˆé™æ€+åŠ¨æ€ï¼‰ / Get all teams (static + dynamic)
export const getAllTeams = (): Team[] => {
  const staticTeams = teams;           // åŸæœ‰8æ”¯é˜Ÿä¼
  const dynamicTeams = getDynamicTeams(); // åŠ¨æ€æ·»åŠ çš„é˜Ÿä¼
  return [...staticTeams, ...dynamicTeams];
};
```

### âœ… é—®é¢˜å®Œç¾è§£å†³ / Problem Perfectly Solved

**âŒ ä¹‹å‰çš„é—®é¢˜ / Previous Issues:**
- é‡å¤é˜Ÿä¼ç»„åˆå¯¼è‡´"Already bet"é”™è¯¯
- ç”¨æˆ·æ— æ³•æ­£å¸¸ä¸‹æ³¨
- éœ€è¦ä¿®æ”¹æ™ºèƒ½åˆçº¦

**âœ… ç°åœ¨çš„è§£å†³æ–¹æ¡ˆ / Current Solution:**
- æ¯ä¸ªé˜Ÿä¼éƒ½æœ‰å”¯ä¸€æ—¶é—´æˆ³ID
- æ°¸è¿œä¸ä¼šå‡ºç°é‡å¤é˜Ÿä¼ç»„åˆ
- æ— éœ€ä¿®æ”¹æ™ºèƒ½åˆçº¦
- ç”¨æˆ·ä½“éªŒå®Œç¾æµç•…

### ğŸ“± ç®¡ç†å‘˜ç•Œé¢é¢„è§ˆ / Admin Interface Preview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ† æ¯”èµ›ç®¡ç† / Match Management     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [â• æ·»åŠ é˜Ÿä¼ / Add Team]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ åˆ›å»ºæ–°æ¯”èµ› / Create New Match   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Team A        â”‚ Team B          â”‚ â”‚
â”‚  â”‚ [é€‰æ‹©...    â–¼]â”‚ [é€‰æ‹©...      â–¼]â”‚ â”‚
â”‚  â”‚ ğŸ“Š å®˜æ–¹é˜Ÿä¼   â”‚ ğŸ“Š å®˜æ–¹é˜Ÿä¼     â”‚ â”‚
â”‚  â”‚ â€¢ é˜¿æ ¹å»·      â”‚ â€¢ å·´è¥¿          â”‚ â”‚
â”‚  â”‚ â€¢ æ³•å›½        â”‚ â€¢ è‹±æ ¼å…°        â”‚ â”‚
â”‚  â”‚ âš¡ è‡ªå®šä¹‰é˜Ÿä¼  â”‚ âš¡ è‡ªå®šä¹‰é˜Ÿä¼   â”‚ â”‚
â”‚  â”‚ â€¢ æŸä»£å· â°   â”‚ â€¢ é˜Ÿä¼X â°     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [åˆ›å»ºæ¯”èµ› / Create Match]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ® ä½¿ç”¨æ¼”ç¤º / Usage Demo

**ç®¡ç†å‘˜æ“ä½œæµç¨‹ / Admin Operation Flow:**
1. ç‚¹å‡»å³ä¸‹è§’AdminæŒ‰é’® â†’ è¿›å…¥ç®¡ç†é¢æ¿
2. ç‚¹å‡»"â• æ·»åŠ é˜Ÿä¼"æŒ‰é’® â†’ æ‰“å¼€æ·»åŠ è¡¨å•
3. å¡«å†™ä¿¡æ¯ï¼š
   - é˜Ÿä¼åç§°ï¼šæŸä»£å·
   - Historical Win Rate: 75
   - Average Age: 28.5
   - Injury Count: 1
4. ç‚¹å‡»"æ·»åŠ "æŒ‰é’® â†’ é˜Ÿä¼ä¿å­˜æˆåŠŸ
5. åœ¨Selecté€‰é¡¹ä¸­çœ‹åˆ°æ–°é˜Ÿä¼ï¼š"æŸä»£å· â°"
6. é€‰æ‹©"æŸä»£å· VS æ³•å›½" â†’ åˆ›å»ºæ¯”èµ›æˆåŠŸ
7. ç”¨æˆ·å¯æ­£å¸¸ä¸‹æ³¨ï¼Œæ— é‡å¤é—®é¢˜ âœ…

### ğŸ“Š æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“ / Core Advantages Summary

| æ–¹é¢ / Aspect | ä¼ ç»Ÿæ–¹æ¡ˆ / Traditional | åŠ¨æ€æ–¹æ¡ˆ / Dynamic |
|---------------|----------------------|-------------------|
| é˜Ÿä¼æ•°é‡ / Team Count | å›ºå®š8æ”¯ / Fixed 8 | æ— é™åˆ¶ / Unlimited |
| é‡å¤æŠ¼æ³¨é—®é¢˜ / Duplicate Betting | å­˜åœ¨ / Exists | å®Œå…¨è§£å†³ / Fully Solved |
| åˆçº¦ä¿®æ”¹ / Contract Changes | éœ€è¦ / Required | ä¸éœ€è¦ / Not Required |
| å¼€å‘å‘¨æœŸ / Development Time | é•¿ / Long | çŸ­ / Short |
| ç”¨æˆ·ä½“éªŒ / User Experience | æœ‰é—®é¢˜ / Problematic | å®Œç¾ / Perfect |

## ğŸ”§ Troubleshooting WebSocket Demo / WebSocketæ¼”ç¤ºæ•…éšœæ’é™¤

### Common Issues / å¸¸è§é—®é¢˜

**1. 404 Error on /api/auth/login / ç™»å½•API 404é”™è¯¯**
```
ERROR: POST http://localhost:3000/api/auth/login 404 (Not Found)
```
**Solution / è§£å†³æ–¹æ¡ˆ:** 
- Make sure backend server is running on port 3001 / ç¡®ä¿åç«¯æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£3001
- Run `npm run server` to start the backend / è¿è¡Œ `npm run server` å¯åŠ¨åç«¯
- The frontend (Next.js) runs on port 3000, API server on port 3001 / å‰ç«¯(Next.js)è¿è¡Œåœ¨ç«¯å£3000ï¼ŒAPIæœåŠ¡å™¨åœ¨ç«¯å£3001

**2. WebSocket Connection Failed / WebSocketè¿æ¥å¤±è´¥**
```
ERROR: WebSocket connection failed
```
**Solution / è§£å†³æ–¹æ¡ˆ:**
- Verify both servers are running / ç¡®è®¤ä¸¤ä¸ªæœåŠ¡å™¨éƒ½åœ¨è¿è¡Œ:
  - Backend: `npm run server` (port 3001)
  - Frontend: `npm run dev` (port 3000)
- Check WebSocket URL configuration / æ£€æŸ¥WebSocket URLé…ç½®
- Run `npm run test-websocket` to verify connection / è¿è¡Œ `npm run test-websocket` éªŒè¯è¿æ¥

**3. Environment Variables / ç¯å¢ƒå˜é‡**
```
Create .env file in root directory with:
åœ¨æ ¹ç›®å½•åˆ›å»º .env æ–‡ä»¶ï¼ŒåŒ…å«:

NEXT_PUBLIC_WEBSOCKET_URL=http://localhost:3001
NEXT_PUBLIC_API_URL=http://localhost:3001
```

**4. Testing WebSocket Functionality / æµ‹è¯•WebSocketåŠŸèƒ½**
```bash
# Test all WebSocket connections / æµ‹è¯•æ‰€æœ‰WebSocketè¿æ¥
npm run test-websocket

# Test API endpoints / æµ‹è¯•APIç«¯ç‚¹
npm run test-api

# Run all tests / è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test-all
```

### Server Startup Commands / æœåŠ¡å™¨å¯åŠ¨å‘½ä»¤

```bash
# Start backend server with WebSocket support / å¯åŠ¨æ”¯æŒWebSocketçš„åç«¯æœåŠ¡å™¨
npm run server

# Start frontend development server / å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# Access WebSocket demo / è®¿é—®WebSocketæ¼”ç¤º
http://localhost:3000/websocket-demo
```

### WebSocket Demo Features / WebSocketæ¼”ç¤ºåŠŸèƒ½

**Real-time Events / å®æ—¶äº‹ä»¶:**
- âœ… User authentication / ç”¨æˆ·è®¤è¯
- âœ… Role-based permissions / åŸºäºè§’è‰²çš„æƒé™
- âœ… Live status updates / å®æ—¶çŠ¶æ€æ›´æ–°
- âœ… Event participation / äº‹ä»¶å‚ä¸
- âœ… Match results broadcasting / æ¯”èµ›ç»“æœå¹¿æ’­
- âœ… QR code scanning / äºŒç»´ç æ‰«æ
- âœ… Reward notifications / å¥–åŠ±é€šçŸ¥
- âœ… Health monitoring / å¥åº·ç›‘æ§

**User Roles / ç”¨æˆ·è§’è‰²:**
- ğŸ”§ Admin: System management / ç³»ç»Ÿç®¡ç†
- ğŸ§‘â€ğŸ’¼ Ambassador: Event coordination / æ´»åŠ¨åè°ƒ
- ğŸƒâ€â™‚ï¸ Athlete: Competition participation / æ¯”èµ›å‚ä¸
- ğŸ™‹â€â™‚ï¸ Audience: Event spectating / è§‚çœ‹æ´»åŠ¨

## Contract Addresses / åˆçº¦åœ°å€

- CHZ Token (Testnet): `0x4Bf7078D36F779Df3E98c24F51482C1002C2E23C` 